<%- include('../partials/header.ejs') %>

<!-- Google Maps API JS Functions and Callback -->
<script type="text/javascript" async defer src="/js/posts/gmap-inits.js"></script>
<script type="text/javascript" async defer src="/js/posts/gmap-listeners.js"></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=<%= API_KEY %>&callback=editMap"></script>

<form id="edit" action="/catspotting/<%= post._id %>?_method=PUT" method="POST">
    <fieldset>
        <label for="title">Title</label>
        <input type="text" name="title" value="<%= post.title %>" required>
    </fieldset>
    <fieldset>
        <label for="location">Location Spotted</label>
        <input id="location" type="text" name="location" value="<%= post.location %>"/>
        <button id="address-submit" type="button">Pin On Map</button>
        <button id="address-clear" type="button">Clear Location</button>
        <div id="map"></div>
        <label for="latitude">Latitude</label>
        <input id="lat" type="text" name="latitude" value="<%= post.latitude %>" READONLY/>
        <label for="longitude">Longitude</label>
        <input id="lng" type="text" name="longitude" value="<%= post.longitude %>" READONLY/>
    </fieldset>
    <fieldset>
        <label for="description">Description</label>
        <textarea name="description"><%= post.description %></textarea>
    </fieldset>
    <fieldset>
        <label for="img">IMG source (full http path)</label>
        <input type="text" name="img" value="<%= post.img %>" required>
    </fieldset>
    <div class="modify-submit">
        <button id="submit-post" type="submit">Edit Post</button>
        <a class="go-back" href="/catspotting/<%= post._id %>">Go Back</a>
    </div>
</form>

<%- include('../partials/footer.ejs') %>
